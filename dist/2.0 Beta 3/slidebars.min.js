/*!
 * Slidebars - A jQuery framework for off-canvas menus and sidebars.
 * Version: 2.0 Beta 3
 * Url: http://plugins.adchsm.me/slidebars/
 * Author: Adam Charles Smith
 * Author url: http://www.adchsm.me/
 * License: GPL General Pubic License v2.0
 * License url: http://www.gnu.org/licenses/gpl-2.0.html
 */

var slidebars=function(){var e=$("[canvas]"),t={},n=!1,i=["top","right","bottom","left"],s=["reveal","push","overlay"],r="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",o=function(e,n,i,s){return t.hasOwnProperty(e)?!1:void(t[e]={id:e,side:n,style:i,element:s,active:!1})},a=function(n){var i=$(),s="0px, 0px";return("reveal"===t[n].style||"push"===t[n].style)&&(i=i.add(e)),("push"===t[n].style||"overlay"===t[n].style)&&(i=i.add(t[n].element)),t[n].active&&("top"===t[n].side?s="0px, "+t[n].element.css("height"):"right"===t[n].side?s="-"+t[n].element.css("width")+", 0px":"bottom"===t[n].side?s="0px, -"+t[n].element.css("height"):"left"===t[n].side&&(s=t[n].element.css("width")+", 0px")),{elements:i,amount:s}};this.init=function(e){$("[off-canvas]").each(function(){var e=$(this).attr("off-canvas").split(" ",3);e[0]&&-1!==i.indexOf(e[1])&&-1!==s.indexOf(e[2])&&o(e[0],e[1],e[2],$(this))}),n=!0,this.css(),$(document).trigger("slidebars-init"),"function"==typeof e&&e()},this.css=function(e){if(!n)return!1;for(var i in t)if(t.hasOwnProperty(i)){var s;s=t[i].element.css("top"===t[i].side||"bottom"===t[i].side?"height":"width"),("push"===t[i].style||"overlay"===t[i].style)&&t[i].element.css("margin-"+t[i].side,"-"+s)}$(document).trigger("slidebars-css"),"function"==typeof e&&e()},this.open=function(e,i){if(!n&&!t.hasOwnProperty(e))return!1;var s=function(){t[e].active=!0,t[e].element.css("display","block"),$(document).trigger("slidebar-opening",[t[e].id]);var n=a(e);n.elements.css("transform","translate("+n.amount+")"),n.elements.on(r,function(){$(document).trigger("slidebar-opened",[t[e].id]),"function"==typeof i&&i(),n.elements.off(r)})};this.active()&&this.active()!==e?this.close(this.active(),function(){s()}):s()},this.close=function(e,i){if(!n&&e&&!t.hasOwnProperty(e))return!1;if(!e)for(var s in t)t.hasOwnProperty(s)&&t[s].active===!0&&(e=s);if(e&&t[e].active===!0){t[e].active=!1,$(document).trigger("slidebar-closing",[t[e].id]);var o=a(e);o.elements.css("transform","translate("+o.amount+")"),o.elements.on(r,function(){t[e].element.css("display","none"),$(document).trigger("slidebar-closed",[t[e].id]),"function"==typeof i&&i(),o.elements.off(r)})}},this.toggle=function(e,i){return n||t.hasOwnProperty(e)?void(t[e].active?this.close(e,function(){"function"==typeof i&&i()}):this.open(e,function(){"function"==typeof i&&i()})):!1},this.active=function(e,i){if(!n)return!1;if(e)return t.hasOwnProperty(e)?t[e].active:!1;var s=!1;for(var r in t)if(t.hasOwnProperty(r)&&t[r].active){s=t[r].id;break}return s},this.create=function(e,r,a,c,f){if(!n)return!1;if(e&&-1!==i.indexOf(r)&&-1!==s.indexOf(a)){if(t.hasOwnProperty(e))return!1;$('<div id="'+e+'" off-canvas="'+e+" "+r+" "+a+'"></div>').appendTo("body"),c&&$("#"+e).html(c),o(e,r,a,$("#"+e)),this.css(),$(document).trigger("slidebar-created",[t[e].id]),"function"==typeof f&&f()}},this.destroy=function(e,i){if(!n&&!t.hasOwnProperty(e))return!1;var s=function(){$(document).trigger("slidebar-destroyed",[t[e].id]),t[e].element.remove(),delete t[e],"function"==typeof i&&i()};t[e].active===!0?this.close(e,function(){s()}):s()}};