// ---------
// Slidebars
// 0.4
//
// Written by Adam Smith
// http://www.adchsm.me/

var style,slidebarLeft,slidebarRight,ajax,ajaxContentID,dontAjax,leftActive=false,rightActive=false,href=false,shift,ie;var slidebars={launch:function(a){style=a.style;slidebarLeft=a.slidebarLeft;slidebarRight=a.slidebarRight;ajax=a.ajax;if(ajax){ajaxContentID=a.ajaxContentID;dontAjax=a.dontAjax}if(style===undefined){style="static"}if(slidebarLeft===undefined){slidebarLeft=true}if(slidebarRight===undefined){slidebarRight=true}if(ajax===undefined){ajax=false;ajaxContentID=false;dontAjax=false}if(ajax){if(ajaxContentID===undefined){alert("You must specify a main content id for use with ajax links.")}}slidebars.css();slidebars.ieDet();slidebars.disable();slidebars.input();if(ajax){slidebars.ajaxSetup()}$(window).resize(slidebars.resize)},css:function(){$("#site, #slidebar-left, #slidebar-right").css({height:""});var c=$(window).width();if(c<=480){shift=c*0.7;$("#slidebar-left, #slidebar-right").css({width:shift})}else{if(c<=768){shift=c*0.5;$("#slidebar-left, #slidebar-right").css({width:shift})}else{shift=c*0.25;$("#slidebar-left, #slidebar-right").css({width:shift})}}var a=$("#viewport").height(),e=$("#bar").height(),d=$("#site").height(),f=$("#slidebar-left").height(),g=$("#slidebar-right").height(),b=Math.max(d,f,g);$("#bar .wrapper").css({height:e});$("#site").css({"margin-top":e});if(style==="static"){$("#site, #slidebar-left, #slidebar-right").css({height:b})}else{if(style==="fixed"){$("#bar, #slidebar-left, #slidebar-right").css({position:"fixed"});if(d>a){$("#site").css({"overflow-y":"scroll"})}if(f>a){$("#slidebar-left").css({"overflow-y":"scroll"})}if(g>a){$("#slidebar-right").css({"overflow-y":"scroll"})}}}},disable:function(){if(!slidebarLeft){$("#slidebar-left, .slidebar-left-control").remove()}if(!slidebarRight){$("#slidebar-right, .slidebar-right-control").remove()}},ieDet:function(){ie=(function(){var c,a=3,d=document.createElement("div"),b=d.getElementsByTagName("i");while(d.innerHTML="<!--[if gt IE "+(++a)+"]><i></i><![endif]-->",b[0]){}return a>4?a:c}())},resize:function(){slidebars.css();if(leftActive){slidebars.openLeft()}if(rightActive){slidebars.openRight()}},ajaxSetup:function(){dontAjax=dontAjax.split(", ");$(ajaxContentID).parent().append('<div id="loading"><div id="spinner"></div></div>');slidebars.ajaxLinks()},ajaxLinks:function(){$("a").on("click",function(d){d.preventDefault();var c;href=$(this).attr("href");for(var b=0,a=dontAjax.length;b<a;b++){c=href.indexOf(dontAjax[b]);if(c!=-1){break}}if(c==-1){if(leftActive||rightActive){slidebars.close();setTimeout(slidebars.ajaxLoad,400)}else{slidebars.ajaxLoad()}}else{window.location=href}})},ajaxLoad:function(){$(ajaxContentID).fadeOut(200);$("#loading").css({display:"table"});if(ie===9){$("#loading").append('<div id="degrees"></div>');$("#degress").css({display:"none"});$("#spinner").css({"-ms-transform":"rotate(0)deg"});for(var a=0;a<4;a++){$("#degrees").css("marginTop","0");$("#degrees").animate({marginTop:359},{duration:200,step:function(b,c){$("#spinner").css({"-ms-transform":"rotate("+b+"deg)"})}})}}else{if(ie<=8){$("#loading").html("<p>Loading...</p>")}}$("#loading").fadeIn(100);$(ajaxContentID).load(href+" "+ajaxContentID,function(){if(ie===undefined||ie===10){history.pushState("","",href)}$("#loading").fadeOut(100);$("#loading").css({display:"none"});$(ajaxContentID).fadeIn(200);$("a").off("click");slidebars.ajaxLinks()})},input:function(){$(".slidebar-left-control").on("touchend click",function(a){a.preventDefault();if(leftActive){slidebars.close()}else{slidebars.openLeft()}});$(".slidebar-right-control").on("touchend click",function(a){a.preventDefault();if(rightActive){slidebars.close()}else{slidebars.openRight()}});$("#site").on("touchend click",function(a){if(leftActive||rightActive){a.preventDefault();slidebars.close()}});$("#site").children().on("touchend click",function(a){a.stopPropagation()});$("#slidebar-left a, #slidebar-right a").on("touchend click",function(a){if(leftActive||rightActive){a.preventDefault();href=$(this).attr("href");slidebars.close()}})},openLeft:function(){if(slidebarLeft){$("#slidebar-left").css({visibility:"visible"});if(ie<10){$("#site, #bar").animate({left:shift+"px"},400)}else{$("#site, #bar").css({"-ms-transform":"translate("+shift+"px)","-webkit-transform":"translate("+shift+"px)",transform:"translate("+shift+"px)"})}leftActive=true}},openRight:function(){if(slidebarRight){$("#slidebar-right").css({visibility:"visible"});if(ie<10){$("#site, #bar").animate({left:"-"+shift+"px"},400)}else{$("#site, #bar").css({"-ms-transform":"translate(-"+shift+"px)","-webkit-transform":"translate(-"+shift+"px)",transform:"translate(-"+shift+"px)"})}rightActive=true}},close:function(){if(leftActive||rightActive){if(ie<10){$("#site, #bar").animate({left:"0px"},400)}else{$("#site, #bar").css({"-ms-transform":"translate(0)","-webkit-transform":"translate(0)",transform:"translate(0)"})}setTimeout(function(){$("#slidebar-left, #slidebar-right").css({visibility:"hidden"})},400);leftActive=false;rightActive=false;if(!ajax&&href){window.location=href;href=false}}},disableLeft:function(){slidebarLeft=false;if(leftActive){slidebars.close();setTimeout(slidebars.disable,400)}else{slidebars.disable()}},disableRight:function(){slidebarRight=false;if(rightActive){slidebars.close();setTimeout(slidebars.disable,400)}else{slidebars.disable()}}};