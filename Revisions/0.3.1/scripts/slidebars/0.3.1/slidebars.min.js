// ---------
// Slidebars
// 0.3.1
//
// Written by Adam Smith
// http://www.adchsm.me/
//
// Slidebars uses additional scripts:
// Transit by Rico Sta. Cruz (http://ricostacruz.com/jquery.transit/)
// IE Detection by James Padolsey (http://james.padolsey.com/)

function slidebars(h){var a=false,n=false,d,i,g,p,q,f,r,c,b=h.style,m=h.slidebarLeft,l=h.slidebarRight;if(b===undefined){b="static"}if(m===undefined){m=true}if(l===undefined){l=true}var k={vars:function(){$("#slidebar-left, #slidebar-right, #viewport, #site").removeAttr("style");d=$(window).width();if(d<=480){i="70%"}else{if(d<=768){i="50%"}else{i="25%"}}$("#slidebar-left, #slidebar-right").css({width:i});g=$(window).height();p=$("#site").height();q=$("#slidebar-left").height();f=$("#slidebar-right").height();r=Math.max(p,q,f)},disableSlidebars:function(){if(!m){$("#slidebar-left, .slidebar-left-control").css({display:"none"})}if(!l){$("#slidebar-right, .slidebar-right-control").css({display:"none"})}},ieDetection:function(){c=(function(){var u,s=3,w=document.createElement("div"),t=w.getElementsByTagName("i");while(w.innerHTML="<!--[if gt IE "+(++s)+"]><i></i><![endif]-->",t[0]){}return s>4?s:u}())}};var j={openLeft:function(){$("#slidebar-left").css({display:"block"});if(c<10){$("#site, #bar").animate({left:i},400);$("#slidebar-right").animate({right:"-"+i},400)}else{$("#site, #bar, #slidebar-right").transition({x:i,duration:500,easing:"snap"})}a=true},openRight:function(){$("#slidebar-right").css({display:"block"});if(c<10){$("#site, #bar, #slidebar-left").animate({left:"-"+i},400)}else{$("#site, #bar, #slidebar-left").transition({x:"-"+i,duration:500,easing:"snap"})}n=true},close:function(){if(c<10){$("#site, #bar, #slidebar-left").animate({left:"0"},400);$("#slidebar-right").animate({right:"0"},400)}else{$("#site, #bar, #slidebar-left, #slidebar-right").transition({x:"0",duration:500,easing:"ease"})}setTimeout(function(){$("#slidebar-left, #slidebar-right").css({display:"none"})},500);a=false;n=false},closeLink:function(){if(c<10){$("#site, #bar, #slidebar-left").animate({left:"0"},400);$("#slidebar-right").animate({right:"0"},400)}else{$("#site, #bar, #slidebar-left, #slidebar-right").transition({x:"0",duration:500,easing:"ease"})}setTimeout(function(){$("#slidebar-left, #slidebar-right").css({display:"none"})},500);a=false;n=false;window.location=href},closeInstant:function(){if(c<10){$("#site, #bar, #slidebar-left").css({left:"0"});$("#slidebar-right").css({right:"0"})}else{$("#site, #bar, #slidebar-left, #slidebar-right").transition({x:"0",duration:0,})}setTimeout(function(){$("#slidebar-left, #slidebar-right").css({display:"none"})},500);a=false;n=false}};function o(){if(b==="static"){$("#bar").css({position:"absolute"});$("#slidebar-left, #slidebar-right").css({position:"absolute","min-height":"100%"});if(r<=g){$("#viewport, #site").css({height:"100%"})}else{if(r>g){$("#viewport, #site").css({"min-height":r})}}}else{if(b==="fixed"){$("#bar, #slidebar-left, #slidebar-right").css({position:"fixed"});$("#slidebar-left, #slidebar-right").css({height:"100%"});if(q>g){$("#slidebar-left").css({"overflow-y":"scroll",})}if(f>g){$("#slidebar-right").css({"overflow-y":"scroll",})}if(p<=g){$("#viewport, #site").css({height:"100%"})}else{if(p>g){$("#viewport, #site").css({"min-height":"100%"})}}}}}k.vars();o();k.ieDetection();if(!m||!l){k.disableSlidebars()}$(window).resize(function(){if(a||n){j.closeInstant()}k.vars();o()});if(m){$(".slidebar-left-control").click(function(){if(!a){j.openLeft()}else{j.close()}})}if(l){$(".slidebar-right-control").click(function(){if(!n){j.openRight()}else{j.close()}})}$("#site").click(function(){if(a||n){j.close()}});$("#slidebar-left a, #slidebar-right a").click(function(){if(a||n){var s=$(this).attr("href");j.closeLink();e.preventDefault()}})};